
# GNSS Status

> [!WARNING]  
> This source is provided mainly for transparency and educational purposes, and may require significant setup and know-how to get running in a custom environment.

_Global Navigation Satellite System (GNSS) Status_ is a system designed to collect, parse, and display Finnish GNSS and ionospheric data in real-time.
The data is provided for free to all users, and is used, for example, in land surveying applications.

The system consists of two parts:
- A [sensor application](#gnss-status-sensor-application) designed to run on an embedded system that collects and parses data from a GNSS sensor.
- The GNSS Status [website](#gnss-status-web-ui) that displays the collected data.

---

## GNSS Status sensor application

The C# application collects and parses [NMEA0183 sentences](https://en.wikipedia.org/wiki/NMEA_0183) from a GNSS sensor and parses ionospheric data from an image.
The parsed data is then passed on to an MQTT server for storage.

### Features

- **NMEA0183 Sentence Parsing**: Collects and parses various NMEA0183 sentences such as GGA, GSA, GST, GSV, and NTR.
- **Ionospheric Data Parsing**: Extracts ionospheric data from the [FINPOS Iono image](https://finpos.nls.fi/iono/) provided by the National Land Survey of Finland to calculate the ionospheric percentage.
- **MQTT Integration**: Sends the parsed GNSS and ionospheric data to an MQTT server for further processing and storage.
- **Configuration Management**: Uses a configuration manager to handle various settings such as server addresses, ports, and intervals.

### Requirements

- Something to run the application on, such as a Raspberry Pi.
- GNSS Sensor
- .NET 7.0 SDK
- MQTT Server

### Installation

1. **Clone the repository**:
    ```sh
    git clone https://github.com/japsuu/GNSSStatus.git
    cd GNSSStatus
    ```

2. **Install .NET 7.0 SDK**:
   Follow the instructions on the [.NET 7.0 SDK download page](https://dotnet.microsoft.com/download/dotnet/7.0) to install the SDK on your Raspberry Pi.

3. **Build the project**:
    ```sh
    dotnet publish app/GNSSStatus.sln -r linux-arm64 -c Release --self-contained false /p:PublishSingleFile=true
    ```

4. **Run the application**:
    ```sh
    cd app/Build/Release/net7.0/linux-arm64/publish
    ./GNSSStatus
    ```

### Configuration

The application uses a configuration file to manage settings.
An `assets/config.json` file is autogenerated on first start to the directory.
Ensure it is correctly configured with your GNSS sensor details, MQTT server details, and other relevant settings.

### Usage

Once the application is running, it will continuously collect and parse data from the GNSS sensor and the latest available FINPOS ionospheric image.
The parsed data will be sent to the configured MQTT server.

---

## GNSS Status web UI

The GNSS Status web UI [(link)](https://japsuu.github.io/GNSSStatus/) is a website that displays the collected GNSS and ionospheric data in real-time in a user-friendly format.

The user can select from a list of available GNSS sensor instances to view the data from.

> [!NOTE]  
> The web UI will ONLY list the OFFICIAL GNSS sensor instances. If you are running your own sensor, you will need to modify the source code to include your sensors in the list.

The web UI is built using vanilla HTML, CSS, and JavaScript for maximum compatibility. It is a client-side application and does not require any server-side components to run, allowing it to be hosted on any static web server.

### Features

- **Real-time**: Displays the collected GNSS and ionospheric data in real-time.
- **Responsive Design**: Works on all devices, from desktops to mobile phones.
- **Cross-platform**: Works on all modern web browsers and operating systems.
- **Lightweight**: The web UI is lightweight and loads quickly, even on slow connections.
- **Secure**: The web UI does not collect any personal data and does not require any permissions to run.
- **Translation support**: The web UI is available in both English and Finnish.

### Usage

This section will briefly explain the available configuration options and how to use the web UI:

**Settings:**
1. **Selected rover**: Select the rover you want to view data from.
2. **Display mode**: Choose the timespan you want to view data from (e.g. "Start of day", "Last 24 hours"...).
3. **Auto-scale Y**: Automatically scale the Y-axis of the graphs to fit the data.
4. **Show only RTK fixed**: Only show data points where the GNSS sensor has a fixed RTK solution.
5. **Select date & download**: Select a specific date to download the data from, as a CSV file.

**Graphs:**
1. **dZ**: The difference between the GNSS sensor's altitude and the actual real altitude.
2. **dXY**: The difference between the GNSS sensor's position and the actual real position.

**Data (measured error):**
1. **DeltaZ**: The latest value of the dZ graph.
2. **DeltaXY**: The latest value of the dXY graph.
3. **Ionosphere**: The latest ionospheric percentage. Larger value means more ionospheric interference.

**Data (rover data):**
1. **Identifier**: The identifier of the GNSS sensor. Each sensor has a unique identifier.
2. **GPS Time**: The current GPS time.
3. **Distance to Base**: The distance between the GNSS sensor and the base station.
4. **Fix Type**: The current fix type of the GNSS sensor. Available values are "No Fix", "RTK Float", and "RTK Fix".
5. **Satellites in Use**: The number of satellites in the GNSS sensor's solution.
6. **PDOP**: The current position dilution of precision.
7. **HDOP**: The current horizontal dilution of precision.
8. **VDOP**: The current vertical dilution of precision.
9. **Error Latitude**: The latitude error.
10. **Error Longitude**: The longitude error.
11. **Error altitude**: The altitude error.

**FixType graph:**
- Displays the percentages of the different fix types over the selected timespan.

**Latest ionosphere status:**
- Graph showing the latest ionospheric percentage over time. Provided by the [National Land Survey of Finland (FINPOS)](https://finpos.nls.fi/iono/).

## License

All rights reserved. The source code is provided for educational purposes only and may not be used for commercial purposes without permission. [Contact the author](mailto:japsu.honkasalo@gmail.com) for more information.